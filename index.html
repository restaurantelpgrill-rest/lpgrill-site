<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LP Grill ‚Äî Card√°pio</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- Admin Gear Discreta (s√≥ pro index) -->
  <style>
    .admin-gear{
      position: fixed;
      top: 8px;
      left: 8px;
      width: 22px;
      height: 22px;
      display: grid;
      place-items: center;
      text-decoration: none;
      border-radius: 999px;
      z-index: 9999;
      user-select: none;
      font-size: 13px;
      line-height: 1;
      opacity: .12;
      background: transparent;
      color: rgba(0,0,0,.65);
      transition: opacity .2s ease, transform .2s ease, background .2s ease;
    }
    .admin-gear:hover{
      opacity: .95;
      transform: rotate(80deg) scale(1.06);
      background: rgba(0,0,0,.06);
    }
    .admin-gear:active{ transform: rotate(120deg) scale(.98); }

    @media (max-width: 520px){
      .admin-gear{ opacity:.08; top:6px; left:6px; }
      .admin-gear:hover{ opacity:.55; }
    }
  </style>

  <!-- =========================
       WINE PREMIUM LIGHT (HOME) + PIX
       (mais claro / menos pesado)
       OBS: Mantive o CSS como estava (n√£o muda o site).
       O PIX da HOME foi removido do BODY como voc√™ pediu.
  ========================== -->
  <style>
    :root{
      --wine-900:#2A0E17;
      --wine-700:#5A1A2D;

      --gold-500:#D6B36A;
      --gold-400:#E6C983;

      --cream-50:#FFF8F1;
      --cream-100:#F6EFE6;
      --cream-200:#EFE3D5;

      --ink:#171118;
      --ink2:rgba(23,17,24,.72);
      --line:rgba(0,0,0,.10);

      --shadow: 0 14px 36px rgba(0,0,0,.12);
      --radius:18px;
    }

    .wine-hero{
      position:relative;
      margin-top: 16px;
      background:
        radial-gradient(1100px 520px at 15% 18%, rgba(214,179,106,.20), transparent 55%),
        radial-gradient(900px 520px at 85% 25%, rgba(90,26,45,.10), transparent 55%),
        linear-gradient(180deg, var(--cream-50), var(--cream-100));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .wine-shell{ max-width: 1120px; margin: 0 auto; padding: 18px 16px 20px; }

    .wine-topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px; flex-wrap: wrap;
    }

    .wine-badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px;
      border-radius: 999px;
      background: rgba(214,179,106,.16);
      border:1px solid rgba(214,179,106,.35);
      color: rgba(70,45,10,1);
      font-weight:800;
    }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 900;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.85);
      color: rgba(35,20,25,.92);
    }
    .pill.ok{
      background: rgba(0,200,120,.12);
      border-color: rgba(0,200,120,.28);
      color: rgba(0,90,50,1);
    }
    .pill.wait{
      background: rgba(214,179,106,.16);
      border-color: rgba(214,179,106,.30);
      color: rgba(80,55,15,1);
    }

    .wine-title{
      font-size: 22px;
      line-height: 1.15;
      margin: 12px 0 6px;
      color: var(--wine-900);
      letter-spacing: -0.2px;
    }

    .wine-sub{
      color: var(--ink2);
      font-size: 14px;
      line-height: 1.5;
      max-width: 70ch;
      margin: 0;
    }

    .wine-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      margin-top: 14px;
    }
    @media(max-width: 900px){ .wine-grid{ grid-template-columns: 1fr; } }

    /* Cards mais claros */
    .wine-card{
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(246,239,230,.92));
      color: var(--ink);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .wine-card .inner{ padding: 16px; }

    .btn-wine{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.75);
      color: rgba(25,15,20,.92);
      font-weight: 900;
      cursor:pointer;
      text-decoration:none;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .btn-wine:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.92);
      border-color: rgba(0,0,0,.14);
    }
    .btn-gold{
      background: linear-gradient(180deg, rgba(242,220,165,.98), rgba(214,179,106,.92));
      color:#2a1607;
      border:1px solid rgba(214,179,106,.55);
    }

    .pix-row{ display:flex; gap:12px; align-items:stretch; flex-wrap:wrap; }
    .pix-qr{
      width: 168px; height: 168px;
      background: rgba(255,255,255,.65);
      border:1px dashed rgba(0,0,0,.18);
      border-radius: 16px;
      display:flex; align-items:center; justify-content:center;
    }
    .pix-meta{ flex:1; min-width: 240px; }
    .pix-label{ font-size: 12px; color: rgba(23,17,24,.70); margin-bottom: 6px; }
    .pix-value{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(0,0,0,.10);
      word-break: break-all;
      color: rgba(25,15,20,.92);
    }

    .pay-status{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(0,0,0,.10);
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(30,16,22,.92);
      color: #FFF7F1;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      padding: 12px 14px;
      box-shadow: 0 18px 50px rgba(0,0,0,.25);
      display:none;
      z-index: 9999;
      max-width: calc(100vw - 28px);
    }
  </style>
</head>

<body class="app">

  <a href="#" id="adminGear" class="admin-gear" aria-label="Admin" title="Admin">‚öô</a>

  <header class="pagebar">
    <div class="page-title">
      <h1>LP Grill</h1>
      <p>Pedidos r√°pidos ‚Ä¢ WhatsApp</p>
    </div>

    <button class="cart-btn" id="openCart" aria-label="Abrir carrinho">
      <span class="cart-ico">üõí</span><span class="cart-badge" id="cartCount">0</span>
    </button>
  </header>

  <div class="container subinfo" id="infoBar"></div>

  <main class="container">
    <div class="grid">
      <a class="tile" href="marmitas.html">
        <div class="tile-ico">üç±</div><div class="tile-title">Marmitas</div>
        <div class="tile-sub">Pratos do dia ‚Ä¢ bem servidos</div>
      </a>

      <a class="tile" href="porcoes.html">
        <div class="tile-ico">üçü</div><div class="tile-title">Por√ß√µes</div>
        <div class="tile-sub">Perfeito pra compartilhar</div>
      </a>

      <a class="tile" href="bebidas.html">
        <div class="tile-ico">ü•§</div><div class="tile-title">Bebidas</div>
        <div class="tile-sub">Geladas ‚Ä¢ do jeito certo</div>
      </a>

      <a class="tile" href="sobremesas.html">
        <div class="tile-ico">üç∞</div><div class="tile-title">Sobremesas</div>
        <div class="tile-sub">Finalize com chave de ouro</div>
      </a>

      <a class="tile highlight" href="checkout.html">
        <div class="tile-ico">‚úÖ</div><div class="tile-title">Finalizar Pedido</div>
        <div class="tile-sub">Enviar no WhatsApp</div>
      </a>
    </div>

    <a class="wa-float" id="waFloat" href="#" aria-label="WhatsApp">
      <img src="img/whatsapp.png" alt="WhatsApp">
    </a>
  </main>

  <div class="sticky-cta" id="stickyCTA" hidden>
    <button class="cta" id="ctaOpenCart" type="button">
      <span>Ver carrinho</span><strong id="ctaTotal">R$ 0,00</strong>
    </button>
    <a class="cta primary" href="checkout.html">Finalizar</a>
  </div>

  <!-- Drawer do carrinho -->
  <aside class="drawer" id="cartDrawer" aria-hidden="true">
    <div class="drawer-backdrop" id="closeCartBackdrop"></div>
    <div class="drawer-panel" role="dialog" aria-modal="true" aria-label="Carrinho">
      <div class="drawer-head">
        <div><h3>Seu carrinho</h3><p class="muted">Itens + taxa (se entrega)</p></div>
        <button class="icon-btn" id="closeCart" aria-label="Fechar">‚úï</button>
      </div>

      <div class="drawer-body">
        <div class="delivery-toggle">
          <button class="dt-btn" id="modeEntrega" type="button">üöö Entrega</button>
          <button class="dt-btn" id="modeRetirar" type="button">üè¨ Retirar</button>
        </div>
        <div id="cartItems"></div>
      </div>

      <div class="drawer-foot">
        <div class="totals">
          <div class="row"><span>Subtotal</span><strong id="subTotal">R$ 0,00</strong></div>
          <div class="row"><span>Taxa</span><strong id="deliveryFee">R$ 0,00</strong></div>
          <div class="row total"><span>Total</span><strong id="grandTotal">R$ 0,00</strong></div>
          <div class="mini muted">‚è±Ô∏è Tempo m√©dio: <span id="etaText">30‚Äì60 min</span></div>
        </div>
        <div class="drawer-actions">
          <button class="btn light" id="clearCart" type="button">Limpar</button>
          <a class="btn primary" href="checkout.html">Finalizar</a>
        </div>
      </div>
    </div>
  </aside>

  <div class="toast" id="toast"></div>

  <!-- ====== CHECKOUT/PAGAMENTO (ETAPA SEPARADA) ‚Äî N√ÉO APARECE NA HOME ====== -->
  <div id="checkoutOverlay" class="ck-overlay" aria-hidden="true">
    <div class="ck-sheet" role="dialog" aria-modal="true" aria-labelledby="ckTitle">
      <div class="ck-head">
        <div>
          <div id="ckTitle" class="ck-title">Finalizar pedido</div>
          <div class="ck-sub">Escolha a forma de pagamento</div>
        </div>
        <button class="ck-x" type="button" id="ckClose" aria-label="Fechar">‚úï</button>
      </div>

      <!-- ETAPA 1: PAGAMENTO -->
      <section class="ck-step" data-step="pay">
        <div class="ck-paygrid">
          <button class="ck-paybtn" type="button" data-pay="pix">
            <span class="ck-ic">‚ö°</span>
            <span class="ck-paytxt">
              <strong>PIX</strong>
              <small>Copia e Cola + QR Code</small>
            </span>
          </button>

          <button class="ck-paybtn" type="button" data-pay="credit">
            <span class="ck-ic">üí≥</span>
            <span class="ck-paytxt">
              <strong>Cr√©dito</strong>
              <small>Prossegue para endere√ßo</small>
            </span>
          </button>

          <button class="ck-paybtn" type="button" data-pay="debit">
            <span class="ck-ic">üí≥</span>
            <span class="ck-paytxt">
              <strong>D√©bito</strong>
              <small>Prossegue para endere√ßo</small>
            </span>
          </button>
        </div>

        <div class="ck-actions">
          <button class="ck-back ghost" type="button" id="ckCancel">Cancelar</button>
        </div>
      </section>

      <!-- ETAPA 2: PIX (TRAVA AQUI) -->
      <section class="ck-step" data-step="pix" hidden>
        <div class="ck-box">
          <div class="ck-row">
            <div class="ck-kv">
              <div class="ck-k">Total do pedido</div>
              <div class="ck-v" id="ckTotalPix">R$ 0,00</div>
            </div>
            <div class="ck-kv">
              <div class="ck-k">Taxa de entrega</div>
              <div class="ck-v" id="ckFeePix">R$ 0,00</div>
            </div>
          </div>

          <div class="ck-qrwrap">
            <div class="ck-qrbox">
              <div id="ckQr" class="ck-qr"></div>
            </div>

            <div class="ck-copy">
              <div class="ck-k">PIX Copia e Cola</div>
              <textarea id="ckPixCode" class="ck-textarea" rows="3" readonly></textarea>
              <button class="ck-btn" type="button" id="ckCopyPix">Copiar c√≥digo PIX</button>
            </div>
          </div>

          <div class="ck-warn">
            <strong>Depois de pagar via PIX,</strong> envie o comprovante no WhatsApp para <strong>liberarmos seu pedido imediatamente</strong>.
          </div>

          <div class="ck-actions">
            <button class="ck-back ghost" type="button" id="ckBackFromPix">Voltar</button>
            <button class="ck-btn" type="button" id="ckPaidPix">J√° paguei (enviar comprovante)</button>
          </div>
        </div>
      </section>

      <!-- ETAPA 3: ENDERE√áO (CR√âDITO/D√âBITO) -->
      <section class="ck-step" data-step="addr" hidden>
        <div class="ck-box">
          <div class="ck-row2">
            <div class="ck-field">
              <label class="ck-lbl">Nome</label>
              <input id="ckName" class="ck-inp" placeholder="Seu nome" autocomplete="name" />
            </div>
            <div class="ck-field">
              <label class="ck-lbl">Telefone</label>
              <input id="ckPhone" class="ck-inp" placeholder="(DDD) 99999-9999" inputmode="tel" />
            </div>
          </div>

          <div class="ck-field">
            <label class="ck-lbl">Endere√ßo completo</label>
            <input id="ckAddress" class="ck-inp" placeholder="Rua, n√∫mero, bairro" autocomplete="street-address" />
          </div>

          <div class="ck-row2">
            <div class="ck-field">
              <label class="ck-lbl">Complemento (opcional)</label>
              <input id="ckCompl" class="ck-inp" placeholder="Apto, bloco, refer√™ncia" />
            </div>
            <div class="ck-field">
              <label class="ck-lbl">Observa√ß√µes (opcional)</label>
              <input id="ckObs" class="ck-inp" placeholder="Sem cebola, pouco gelo..." />
            </div>
          </div>

          <div class="ck-loc">
            <button class="ck-btn ghost" type="button" id="ckGetLocation">Usar minha localiza√ß√£o (GPS) para calcular taxa</button>
            <div class="ck-hint" id="ckKmHint">A taxa depende da dist√¢ncia at√© Maria Teresa (BH).</div>
            <div class="ck-feeline" id="ckFeeLine" hidden>
              Dist√¢ncia: <strong id="ckKm">0,0 km</strong> ‚Ä¢ Taxa: <strong id="ckFee">R$ 0,00</strong>
            </div>
            <div class="ck-block" id="ckBlocked" hidden>
              Fora do raio de 10 km. Entrega indispon√≠vel para este endere√ßo.
            </div>
          </div>

          <div class="ck-actions">
            <button class="ck-back ghost" type="button" id="ckBackFromAddr">Voltar</button>
            <button class="ck-btn" type="button" id="ckConfirmOrder">Confirmar pedido</button>
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- Admin gear -->
  <script>
    (() => {
      const gear = document.getElementById("adminGear");
      if(!gear) return;

      gear.addEventListener("click", (e) => {
        e.preventDefault();
        const ok = localStorage.getItem("LPGRILL_ADMIN_SECRET_OK_V1") === "1";
        if(ok){ window.location.href = "admin.html"; return; }
        window.location.href = "admin.html?k=22550126";
      });
    })();
  </script>

  <!-- Scripts (uma vez s√≥, na ordem certa) -->
  <script src="js/data.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/app.js"></script>
  <script src="js/render.js"></script>

  <!-- QRCode (apenas 1x) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

</body>
</html>

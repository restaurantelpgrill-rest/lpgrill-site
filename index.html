<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <title>LP Grill ‚Äî Pedidos</title>

  <style>
    :root{
      /* ‚úÖ ALTERADO: tema claro */
      --bg:#ffffff;
      --card:#ffffff;
      --card2:#f6f7f9;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;

      --accent:#22c55e;
      --accent2:#0b0b0c;
      --ok:#22c55e;
      --warn:#f59e0b;
      --shadow: 0 16px 40px rgba(0,0,0,.12);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:
    radial-gradient(1200px 700px at 10% -10%, rgba(34,197,94,.14), transparent 55%),
    radial-gradient(900px 600px at 110% 10%, rgba(0,0,0,.04), transparent 55%),
    url("mockup.png") center/cover no-repeat,
    var(--bg);
  color:var(--text);
}
    }
    a{color:inherit}
    .wrap{max-width:1120px;margin:0 auto;padding:18px 16px 110px}

    .topbar{
      position:sticky; top:0; z-index:20;
      backdrop-filter: blur(10px);
      /* ‚úÖ ALTERADO: topbar clara */
      background: linear-gradient(to bottom, rgba(255,255,255,.92), rgba(255,255,255,.70));
      border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .topbar .inner{max-width:1120px;margin:0 auto;padding:14px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:44px;height:44px;border-radius:14px;
      display:grid;place-items:center;
      /* ‚úÖ ALTERADO: logo box claro */
      background: radial-gradient(120px 60px at 30% 20%, rgba(34,197,94,.18), transparent 60%), #ffffff;
      border:1px solid rgba(0,0,0,.10);
      box-shadow: 0 12px 26px rgba(0,0,0,.12);
      overflow:hidden;
    }
    .logo img{width:100%;height:100%;object-fit:cover;display:none}
    .brand h1{margin:0;font-size:16px;line-height:1.1;letter-spacing:.3px}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.85);
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
    }
    .dot{width:8px;height:8px;border-radius:99px;background:var(--warn)}
    .dot.open{background:var(--ok)}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      color:var(--text);
      padding:10px 12px;border-radius:14px;
      font-weight:600;
      cursor:pointer;
      transition:.15s ease;
      display:inline-flex;align-items:center;gap:10px;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(0,0,0,.18)}
    .btn.primary{
      background: linear-gradient(135deg, rgba(34,197,94,.95), rgba(34,197,94,.75));
      border-color: rgba(34,197,94,.45);
      box-shadow: 0 16px 34px rgba(34,197,94,.18);
      color:#fff;
    }
    .btn.ghost{background:transparent}
    .badge{
      min-width:20px;height:20px;padding:0 6px;border-radius:999px;
      background: rgba(0,0,0,.06);
      display:inline-grid;place-items:center;
      font-size:12px;font-weight:800;
      color: var(--text);
    }

    .hero{padding:18px 0 8px;display:grid;gap:14px}
    .heroCard{
      background: linear-gradient(135deg, rgba(0,0,0,.03), rgba(0,0,0,.01));
      border:1px solid rgba(0,0,0,.08);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: var(--shadow);
      display:grid;gap:12px;
    }
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .search{
      flex:1;
      min-width:220px;
      display:flex;gap:10px;align-items:center;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      padding:10px 12px;border-radius:16px;
    }
    .search input{
      width:100%;border:0;outline:0;background:transparent;color:var(--text);
      font-size:14px;
    }
    .mini{font-size:12px;color:var(--muted)}
    .tabs{display:flex;gap:10px;flex-wrap:wrap}
    .tab{
      padding:10px 12px;border-radius:999px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.75);
      color:var(--muted);
      font-weight:700;font-size:13px;
      cursor:pointer;
      user-select:none;
    }
    .tab.active{
      color:var(--text);
      border-color: rgba(34,197,94,.55);
      background: rgba(34,197,94,.12);
    }

    .grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:16px;margin-top:12px}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} .cartPanel{position:relative;top:0} }

    .list{display:grid;gap:12px}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.88));
      border:1px solid rgba(0,0,0,.08);
      border-radius: var(--radius);
      padding:14px;
      box-shadow: 0 10px 26px rgba(0,0,0,.10);
    }
    
/* =========================
   TIPOGRAFIA (mais escura + um pouco maior)
   ========================= */

:root{
  --text-strong:#111827;  /* quase preto (t√≠tulos) */
  --text:#1f2937;         /* cinza bem escuro (texto) */
  --text-soft:#374151;    /* descri√ß√µes */
}

html{ font-size: 106%; } /* +6% geral (bem leve) */

body{
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* T√≠tulos e nomes dos itens */
h1,h2,h3,.title,.item-title,.product-title{
  color: var(--text-strong) !important;
  font-weight: 700;
  letter-spacing: .2px;
}

/* Textos/descri√ß√µes */
p,.subtitle,.desc,.item-desc,.product-desc,.muted,.chip,.tag{
  color: var(--text-soft) !important;
}

/* Pre√ßos */
.price,.product-price,.total,.money{
  color: #000 !important;
  font-weight: 800;
  font-size: 1.06em;
}

/* Campo de busca */
input, textarea, select{
  color: var(--text-strong) !important;
  font-size: 1em;
}
input::placeholder{
  color: #4b5563 !important;
  opacity: 1;
}

/* Deixa os cards mais ‚Äús√≥lidos‚Äù (melhor contraste) */
.card,.panel,.menu-card,.product-card{
  background: rgba(255,255,255,.94) !important;
}
    /* ITEM COM FOTO */
    .item{
      display:grid;
      grid-template-columns: 86px 1fr auto;
      gap:12px;
      align-items:center;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(0,0,0,.02);
    }
    @media (max-width: 520px){
      .item{grid-template-columns: 78px 1fr; grid-template-areas:
        "img info"
        "ctrl ctrl";
      }
      .item .thumb{grid-area:img}
      .item .info{grid-area:info}
      .item .right{grid-area:ctrl; justify-items:stretch}
    }
    .thumb{
      width:86px;height:86px;border-radius:16px; overflow:hidden;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(0,0,0,.04);
      display:grid;place-items:center;
    }
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .thumb .ph{font-size:22px;opacity:.85}
    .item h3{margin:0;font-size:15px}
    .item p{margin:6px 0 0;color:var(--muted);font-size:12.5px;line-height:1.35}
    .price{font-weight:900}
    .item .right{display:grid;gap:10px;justify-items:end}
    .qty{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 10px;border-radius:14px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      justify-content:flex-end;
    }
    .qty button{
      width:28px;height:28px;border-radius:10px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(0,0,0,.04);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
    }
    .qty span{min-width:18px;text-align:center;font-weight:900}

    .cartPanel{position:sticky;top:78px;height:fit-content}
    .cartHeader{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .cartHeader h2{margin:0;font-size:15px}
    .cartEmpty{color:var(--muted);font-size:13px;margin:10px 0 0}
    .cartList{display:grid;gap:10px;margin-top:10px}
    .cartRow{
      display:grid;grid-template-columns: 1fr auto;gap:10px;align-items:center;
      padding:10px;border-radius:14px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(0,0,0,.02);
    }
    .cartRow .name{font-weight:800;font-size:13px}
    .cartRow .meta{color:var(--muted);font-size:12px;margin-top:2px}
    .cartRow .rm{border:0;background:transparent;color:rgba(239,68,68,.95);cursor:pointer;font-weight:900}
    .totals{margin-top:12px;border-top:1px solid rgba(0,0,0,.08);padding-top:12px;display:grid;gap:8px}
    .line{display:flex;justify-content:space-between;gap:10px;color:var(--muted);font-size:13px}
    .line strong{color:var(--text)}
    .form{display:grid;gap:10px;margin-top:12px}
    .field{display:grid;gap:6px}
    .field label{font-size:12px;color:var(--muted);font-weight:700}
    .field input, .field textarea, .field select{
      border-radius:14px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      color:var(--text);
      padding:10px 12px;
      outline: none;
      font-size:14px;
    }
    textarea{min-height:64px;resize:vertical}
    .two{display:grid;grid-template-columns: 1fr 1fr;gap:10px}
    @media (max-width:560px){.two{grid-template-columns:1fr}}

    .notice{
      padding:10px 12px;border-radius:16px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(245,158,11,.12);
      color: var(--text);
      font-size:13px;
      display:flex;gap:10px;align-items:flex-start;
    }
    .notice.ok{background: rgba(34,197,94,.12)}
    .notice small{color:var(--muted)}
    .footer{
      margin-top:16px;color:var(--muted);font-size:12px;
      display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap
    }
    .divider{height:1px;background:rgba(0,0,0,.08);margin:12px 0}

    /* BOT√ÉO FIXO NO CELULAR */
    .stickyOrder{
      position:fixed;
      left:12px; right:12px; bottom:12px;
      z-index:50;
      display:none;
    }
    .stickyOrder .bar{
      max-width:1120px;
      margin:0 auto;
      border-radius: 18px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      padding:10px;
    }
    .stickyOrder .left{
      display:grid; gap:2px;
      min-width:0;
    }
    .stickyOrder .left b{font-size:13px}
    .stickyOrder .left span{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:52vw}
    @media (max-width: 980px){
      .stickyOrder{display:block;}
    }

    /* ‚úÖ NOVO: Bot√£o flutuante WhatsApp (lado direito) */
    .waFloat{
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:999;
      display:flex;
    }
    .waFloat a{
      width:58px;height:58px;border-radius:18px;
      display:grid;place-items:center;
      background: #25D366;
      color:#fff;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 16px 34px rgba(0,0,0,.18);
      text-decoration:none;
      font-size:24px;
      font-weight:900;
    }
    .waFloat a:active{transform: scale(.98)}
  </style>
</head>
<body>

  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <div class="logo" id="logoBox" title="LP Grill">
          <span style="font-weight:900;color:#111827;letter-spacing:.8px">LP</span>
          <img id="logoImg" alt="LP Grill logo" />
        </div>
        <div>
          <h1>LP Grill</h1>
          <p id="subtitle">Pedidos online ‚Ä¢ R√°pido e pr√°tico</p>
        </div>
      </div>

      <div class="actions">
        <div class="pill" id="statusPill" title="Status de funcionamento">
          <span class="dot" id="dot"></span>
          <span id="statusText">Verificando hor√°rio‚Ä¶</span>
        </div>

        <button class="btn ghost" id="clearBtn" type="button" title="Limpar carrinho">
          Limpar
        </button>

        <button class="btn primary" id="goCartBtn" type="button" title="Ir para carrinho">
          Carrinho <span class="badge" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </div>

  <div class="wrap">
    <section class="hero">
      <div class="heroCard">
        <div class="row">
          <div class="search">
            <span style="opacity:.85">üîé</span>
            <input id="search" placeholder="Buscar no card√°pio‚Ä¶ (ex: marmita, frango, coca)" />
          </div>

          <div class="tabs" id="tabs"></div>
        </div>

        <div class="mini" id="miniInfo"></div>
      </div>
    </section>

    <section class="grid">
      <div class="list">
        <div class="card">
          <h2 style="margin:0 0 10px;font-size:15px">Card√°pio</h2>
          <div class="list" id="menu"></div>
          <div class="mini" style="margin-top:10px">
            üì∏ Para as fotos aparecerem: envie as imagens para o reposit√≥rio e coloque o nome igual ao do campo <b>img</b> do item (ex: <b>marmita-tradicional.jpg</b>).
          </div>
        </div>
      </div>

      <aside class="card cartPanel" id="cartPanel">
        <div class="cartHeader">
          <h2>Seu pedido</h2>
          <span class="pill" title="Forma de envio">WhatsApp</span>
        </div>

        <div id="statusNotice" class="notice" style="display:none"></div>

        <div id="cartEmpty" class="cartEmpty">Seu carrinho est√° vazio. Adicione itens do card√°pio üôÇ</div>
        <div class="cartList" id="cartList"></div>

        <div class="totals">
          <div class="line"><span>Subtotal</span> <strong id="subTotal">R$ 0,00</strong></div>
          <div class="line"><span>Taxa de entrega</span> <strong id="shipFee">R$ 0,00</strong></div>
          <div class="line"><span>Total</span> <strong id="grandTotal">R$ 0,00</strong></div>
        </div>

        <div class="divider"></div>

        <div class="form">
          <div class="two">
            <div class="field">
              <label>Seu nome</label>
              <input id="custName" placeholder="Ex: Paulo" />
            </div>
            <div class="field">
              <label>Telefone</label>
              <input id="custPhone" placeholder="(31) 9xxxx-xxxx" />
            </div>
          </div>

          <div class="two">
            <div class="field">
              <label>Entrega ou retirada?</label>
              <select id="fulfillment">
                <option value="entrega">Entrega</option>
                <option value="retirada">Retirada</option>
              </select>
            </div>
            <div class="field">
              <label>Pagamento</label>
              <select id="payment">
                <option value="pix">PIX</option>
                <option value="cartao">Cart√£o</option>
                <option value="dinheiro">Dinheiro</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label>Endere√ßo (se for entrega)</label>
            <input id="address" placeholder="Rua, n√∫mero, bairro, refer√™ncia" />
          </div>

          <div class="field">
            <label>Observa√ß√µes</label>
            <textarea id="notes" placeholder="Sem cebola, bem passado, trocas, etc."></textarea>
          </div>

          <button class="btn primary" id="sendBtn" type="button">
            Finalizar e enviar no WhatsApp
          </button>

          <div class="footer">
            <span id="pixLine">PIX: ‚Äî</span>
            <span id="hoursLine">Hor√°rio: ‚Äî</span>
          </div>
        </div>
      </aside>
    </section>
  </div>

  <!-- BOT√ÉO FIXO NO CELULAR -->
  <div class="stickyOrder" id="stickyOrder">
    <div class="bar">
      <div class="left">
        <b id="stickyTitle">Pedir agora</b>
        <span id="stickySub">Seu carrinho est√° vazio</span>
      </div>
      <button class="btn primary" id="stickyBtn" type="button">Pedir agora</button>
    </div>
  </div>

  <!-- ‚úÖ NOVO: BOT√ÉO FLUTUANTE WHATSAPP (lado direito) -->
  <div class="waFloat" aria-label="Atalho WhatsApp">
    <a id="waFloatBtn" href="#" target="_blank" rel="noopener" title="Chamar no WhatsApp"><svg width="26" height="26" viewBox="0 0 32 32" aria-hidden="true">
  <path fill="currentColor" d="M19.11 17.5c-.3-.15-1.77-.87-2.05-.97-.27-.1-.47-.15-.67.15-.2.3-.77.97-.95 1.17-.17.2-.35.22-.65.07-.3-.15-1.25-.46-2.38-1.48-.88-.78-1.48-1.75-1.65-2.05-.17-.3-.02-.46.13-.61.13-.13.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.02-.52-.07-.15-.67-1.62-.92-2.22-.24-.58-.48-.5-.67-.5h-.57c-.2 0-.52.07-.8.37-.27.3-1.05 1.02-1.05 2.5 0 1.47 1.08 2.9 1.23 3.1.15.2 2.12 3.23 5.13 4.53.72.31 1.28.5 1.72.64.72.23 1.37.2 1.88.12.57-.08 1.77-.72 2.02-1.42.25-.7.25-1.3.17-1.42-.08-.12-.27-.2-.57-.35z"/>
  <path fill="currentColor" d="M16.04 3C9.4 3 4 8.4 4 15.04c0 2.34.67 4.51 1.83 6.35L4 29l7.83-1.77a12 12 0 0 0 4.2.75C22.67 27.98 28 22.66 28 16.02 28 9.38 22.68 3 16.04 3zm0 22.64c-1.4 0-2.78-.38-3.98-1.08l-.28-.16-4.64 1.05 1-4.52-.18-.29a9.6 9.6 0 0 1-1.44-5.1c0-5.3 4.31-9.6 9.6-9.6 5.3 0 9.6 4.31 9.6 9.6 0 5.3-4.31 9.6-9.6 9.6z"/>
</svg>
</a>
  </div>

<script>
/** =========================
 *  CONFIG (EDITE AQUI)
 *  ========================= */
const CONFIG = {
  storeName: "LP Grill",
  cityLine: "Jana√∫ba - MG",
  whatsappNumber: "5531998064556",
  pixKey: "PIX: 31998064556",
  deliveryFee: 5.00,
  hours: [
    { day: 0, open: null, close: null },
  ],
  logoFile: "LOGO.png",
};

/** ‚úÖ NOVO: link do bot√£o flutuante usando o n√∫mero do CONFIG */
(function setFloatingWhatsApp(){
  const msg = `Ol√°! Vim pelo site do ${CONFIG.storeName}.`;
  const url = `https://wa.me/${CONFIG.whatsappNumber}?text=${encodeURIComponent(msg)}`;
  const a = document.getElementById("waFloatBtn");
  if(a) a.href = url;
})();

/** =========================
 *  CARD√ÅPIO (EDITE AQUI)
 *  ========================= */
const MENU = [
  {
    cat: "Marmitas",
    items: [
      { id:"m1", name:"Marmita tradicional", desc:"Arroz, feij√£o, salada e mistura do dia.", price: 23.00, img:"marmita-tradicional.jpg" },
      { id:"m2", name:"Marmita frango", desc:"Frango + acompanhamentos do dia.", price: 20.00, img:"marmita-frango.jpg" },
      { id:"m3", name:"Marmita carne", desc:"Carne + acompanhamentos do dia.", price: 22.00, img:"marmita-carne.jpg" },
    ]
  },
  {
    cat: "Por√ß√µes",
    items: [
      { id:"p1", name:"Prato feito (PF) do dia", desc:"PF completo com salada.", price: 24.00, img:"pf-do-dia.jpg" },
      { id:"p2", name:"Frango grelhado + acompanhamentos", desc:"Bem servido, com salada.", price: 26.00, img:"frango-grelhado.jpg" },
    ]
  },
  {
    cat: "Bebidas",
    items: [
      { id:"b1", name:"Coca-Cola lata 350ml", desc:"Gelada.", price: 6.00, img:"coca-lata.jpg" },
      { id:"b2", name:"Guaran√° lata 350ml", desc:"Gelado.", price: 6.00, img:"guarana-lata.jpg" },
      { id:"b3", name:"√Ågua 500ml", desc:"Sem g√°s.", price: 3.00, img:"agua-500.jpg" },
    ]
  },
];

/** =========================
 *  L√ìGICA DO SITE
 *  ========================= */
const el = (id)=>document.getElementById(id);
const money = (v)=> v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

const state = {
  cat: "Todos",
  q: "",
  cart: loadCart(),
};

function saveCart(){ localStorage.setItem("lpgrill_cart", JSON.stringify(state.cart)); }
function loadCart(){
  try{ return JSON.parse(localStorage.getItem("lpgrill_cart") || "{}"); }
  catch{ return {}; }
}

function getAllCats(){ return ["Todos", ...MENU.map(m=>m.cat)]; }

function renderTabs(){
  const tabs = el("tabs");
  tabs.innerHTML = "";
  getAllCats().forEach(c=>{
    const b = document.createElement("div");
    b.className = "tab" + (state.cat===c ? " active" : "");
    b.textContent = c;
    b.onclick = ()=>{ state.cat=c; render(); };
    tabs.appendChild(b);
  });
}

function filteredItems(){
  const q = state.q.trim().toLowerCase();
  let sections = MENU;
  if(state.cat !== "Todos") sections = MENU.filter(s=>s.cat===state.cat);

  const out = [];
  sections.forEach(sec=>{
    sec.items.forEach(it=>{
      const hay = (sec.cat+" "+it.name+" "+it.desc).toLowerCase();
      if(!q || hay.includes(q)) out.push({ ...it, cat: sec.cat });
    });
  });
  return out;
}

function addToCart(item, delta){
  const cur = state.cart[item.id]?.qty || 0;
  const next = Math.max(0, cur + delta);

  if(next === 0) delete state.cart[item.id];
  else state.cart[item.id] = { id:item.id, name:item.name, price:item.price, qty: next };

  saveCart();
  renderCart();
  renderMenu();
  updateSticky();
}

function cartItems(){ return Object.values(state.cart); }
function calcSubtotal(){ return cartItems().reduce((s,i)=> s + i.price*i.qty, 0); }
function calcShipping(){
  const fulfillment = el("fulfillment").value;
  if(fulfillment === "retirada") return 0;
  return CONFIG.deliveryFee;
}

function renderMenu(){
  const container = el("menu");
  container.innerHTML = "";
  const items = filteredItems();

  if(items.length === 0){
    const empty = document.createElement("div");
    empty.className = "mini";
    empty.textContent = "Nenhum item encontrado.";
    container.appendChild(empty);
    return;
  }

  items.forEach(it=>{
    const row = document.createElement("div");
    row.className = "item";

    const thumb = document.createElement("div");
    thumb.className = "thumb";
    if(it.img){
      const img = document.createElement("img");
      img.src = it.img;
      img.alt = it.name;
      img.onerror = ()=>{ thumb.innerHTML = `<div class="ph">üçΩÔ∏è</div>`; };
      thumb.appendChild(img);
    } else {
      thumb.innerHTML = `<div class="ph">üçΩÔ∏è</div>`;
    }

    const info = document.createElement("div");
    info.className = "info";
    info.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <h3>${it.name}</h3>
        <span class="pill" style="padding:6px 10px">${it.cat}</span>
      </div>
      <p>${it.desc}</p>
    `;

    const right = document.createElement("div");
    right.className = "right";

    const price = document.createElement("div");
    price.className = "price";
    price.textContent = money(it.price);

    const qty = document.createElement("div");
    qty.className = "qty";
    const minus = document.createElement("button");
    minus.textContent = "‚àí";
    minus.onclick = ()=> addToCart(it, -1);

    const count = document.createElement("span");
    count.textContent = String(state.cart[it.id]?.qty || 0);

    const plus = document.createElement("button");
    plus.textContent = "+";
    plus.onclick = ()=> addToCart(it, +1);

    qty.append(minus, count, plus);

    right.append(price, qty);

    row.append(thumb, info, right);
    container.appendChild(row);
  });
}

function renderCart(){
  const list = el("cartList");
  const empty = el("cartEmpty");
  const items = cartItems();

  el("cartCount").textContent = String(items.reduce((s,i)=>s+i.qty,0));
  list.innerHTML = "";

  if(items.length === 0){
    empty.style.display = "block";
  } else {
    empty.style.display = "none";
    items.forEach(i=>{
      const row = document.createElement("div");
      row.className = "cartRow";
      row.innerHTML = `
        <div>
          <div class="name">${i.qty}x ${i.name}</div>
          <div class="meta">${money(i.price)} ‚Ä¢ ${money(i.price*i.qty)}</div>
        </div>
        <button class="rm" title="Remover" aria-label="Remover">‚úï</button>
      `;
      row.querySelector("button").onclick = ()=>{
        delete state.cart[i.id];
        saveCart();
        render();
      };
      list.appendChild(row);
    });
  }

  const sub = calcSubtotal();
  const ship = calcShipping();
  el("subTotal").textContent = money(sub);
  el("shipFee").textContent = money(ship);
  el("grandTotal").textContent = money(sub + ship);
  updateSticky();
}

function isOpenNow(){
  const now = new Date();
  const day = now.getDay();
  const slot = CONFIG.hours.find(h=>h.day===day);
  if(!slot || !slot.open || !slot.close) return { open:false };

  const [oh, om] = slot.open.split(":").map(Number);
  const [ch, cm] = slot.close.split(":").map(Number);
  const openM = oh*60 + om;
  const closeM = ch*60 + cm;
  const curM = now.getHours()*60 + now.getMinutes();
  const ok = curM >= openM && curM <= closeM;
  return { open: ok };
}

function renderStatus(){
  const s = isOpenNow();
  el("dot").classList.toggle("open", s.open);
  el("statusText").textContent = s.open ? "Aberto" : "Fechado";

  const notice = el("statusNotice");
  notice.style.display = "flex";
  notice.className = "notice " + (s.open ? "ok" : "");
  notice.innerHTML = s.open
    ? `‚úÖ <div><strong>Estamos abertos!</strong><br><small>Voc√™ pode fazer o pedido normalmente.</small></div>`
    : `‚ö†Ô∏è <div><strong>Estamos fechados no momento.</strong><br><small>Voc√™ pode montar o pedido e enviar. Confirmamos assim que abrir.</small></div>`;
}

function formatHoursLine(){
  const days = ["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"];
  const parts = CONFIG.hours
    .filter(h=>h.open && h.close)
    .map(h=> `${days[h.day]} ${h.open}-${h.close}`);
  return parts.length ? parts.join(" ‚Ä¢ ") : "Hor√°rio n√£o informado";
}

function buildWhatsAppMessage(){
  const items = cartItems();
  const name = el("custName").value.trim();
  const phone = el("custPhone").value.trim();
  const fulfillment = el("fulfillment").value;
  const payment = el("payment").value;
  const address = el("address").value.trim();
  const notes = el("notes").value.trim();

  const sub = calcSubtotal();
  const ship = calcShipping();
  const total = sub + ship;

  const payLabel = payment === "pix" ? "PIX" : payment === "cartao" ? "Cart√£o" : "Dinheiro";

  let msg = `*Pedido - ${CONFIG.storeName}*\n`;
  msg += `\n*Cliente:* ${name || "(n√£o informado)"}`;
  if(phone) msg += `\n*Telefone:* ${phone}`;
  msg += `\n*Tipo:* ${fulfillment === "retirada" ? "Retirada" : "Entrega"}`;
  msg += `\n*Pagamento:* ${payLabel}`;
  if(fulfillment !== "retirada") msg += `\n*Endere√ßo:* ${address || "(n√£o informado)"}`;

  msg += `\n\n*Itens:*`;
  items.forEach(i=>{ msg += `\n- ${i.qty}x ${i.name} ‚Äî ${money(i.price*i.qty)}`; });

  msg += `\n\n*Subtotal:* ${money(sub)}`;
  msg += `\n*Taxa:* ${money(ship)}`;
  msg += `\n*Total:* *${money(total)}*`;

  if(payment === "pix") msg += `\n\n*${CONFIG.pixKey}*`;
  if(notes) msg += `\n\n*Obs:* ${notes}`;
  msg += `\n\nObrigado!`;
  return msg;
}

function sendWhatsApp(){
  const items = cartItems();
  if(items.length === 0){
    alert("Seu carrinho est√° vazio. Adicione itens antes de enviar üôÇ");
    return;
  }
  const fulfillment = el("fulfillment").value;
  if(fulfillment !== "retirada" && !el("address").value.trim()){
    if(!confirm("Voc√™ escolheu ENTREGA, mas n√£o preencheu o endere√ßo. Deseja enviar mesmo assim?")) return;
  }
  const message = buildWhatsAppMessage();
  const url = `https://wa.me/${CONFIG.whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
}

function setMiniInfo(){
  el("miniInfo").textContent = `${CONFIG.cityLine} ‚Ä¢ Pedido via WhatsApp ‚Ä¢ Fotos: envie os .jpg/.png para o reposit√≥rio`;
  el("pixLine").textContent = CONFIG.pixKey;
  el("hoursLine").textContent = "Hor√°rio: " + formatHoursLine();
  el("subtitle").textContent = `${CONFIG.cityLine} ‚Ä¢ Pedidos pelo WhatsApp`;
}

function tryLoadLogo(){
  const img = el("logoImg");
  img.src = CONFIG.logoFile + "?v=" + Date.now();
  img.onload = ()=>{
    img.style.display = "block";
    el("logoBox").querySelector("span").style.display = "none";
  };
}

function scrollToCart(){
  el("cartPanel").scrollIntoView({behavior:"smooth", block:"start"});
}

function updateSticky(){
  const count = cartItems().reduce((s,i)=>s+i.qty,0);
  const total = calcSubtotal() + calcShipping();
  el("stickySub").textContent = count === 0
    ? "Seu carrinho est√° vazio"
    : `${count} item(ns) ‚Ä¢ Total ${money(total)}`;
  el("stickyBtn").disabled = (count === 0);
  el("stickyBtn").style.opacity = (count === 0 ? ".6" : "1");
}

/** Events */
el("search").addEventListener("input", (e)=>{ state.q = e.target.value; renderMenu(); });
el("clearBtn").onclick = ()=>{
  if(confirm("Limpar carrinho?")){
    state.cart = {};
    localStorage.setItem("lpgrill_cart", JSON.stringify(state.cart));
    render();
  }
};
el("goCartBtn").onclick = scrollToCart;
el("sendBtn").onclick = sendWhatsApp;
el("fulfillment").addEventListener("change", ()=> renderCart());
el("stickyBtn").onclick = ()=>{ scrollToCart(); };

/** Start */
tryLoadLogo();
render();

function render(){
  renderTabs();
  renderMenu();
  renderCart();
  renderStatus();
  setMiniInfo();
  updateSticky();
}
</script>
</body>
</html>
